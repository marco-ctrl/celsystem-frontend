<div class="p-4 max-w-7xl">
  <h2 class="text-2xl font-bold mb-4">Lecciones de Celula</h2>
  <!-- Contenedor principal como tarjeta flotante -->
  <!-- <div class="bg-white rounded-2xl shadow-lg p-6"> -->
  <!-- Search Bar -->
  <div class="mb-4">
    <form
      autocomplete="off"
      [formGroup]="formSearch"
      class="flex flex-row gap-2"
    >
      <mat-form-field class="md:w-1/3 pr-1">
        <mat-label>Buscar Lecciones</mat-label>
        <input
          matInput
          placeholder="Ingrese descripciÃ³n o estado"
          formControlName="search"
          (keyup)="onSearch()"
        />
      </mat-form-field>
      <div>
        <button
          mat-mini-fab
          title="Agregar Lider"
          color="primary"
          (click)="openTemasForm()"
        >
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </form>
  </div>

  <!-- Responsive Table -->
  <div class="hidden md:block">
    <table
      mat-table
      [dataSource]="temas()!.data"
      class="mat-elevation-z8 demo-table table-custom"
    >
      <ng-container matColumnDef="#">
        <th mat-header-cell *matHeaderCellDef>No.</th>
        <td mat-cell *matCellDef="let element; let i = index">{{ i + 1 }}</td>
      </ng-container>

      <ng-container matColumnDef="tema">
        <th mat-header-cell *matHeaderCellDef>Tema</th>
        <td mat-cell *matCellDef="let element">
          {{ element.tema | uppercase }}
        </td>
      </ng-container>

      <ng-container matColumnDef="descripcion">
        <th mat-header-cell *matHeaderCellDef>Descripcion</th>
        <td mat-cell *matCellDef="let element">
          {{ element.description | uppercase }}
        </td>
      </ng-container>

      <ng-container matColumnDef="fecha">
        <th mat-header-cell *matHeaderCellDef>Fecha</th>
        <td mat-cell *matCellDef="let element">{{ element.date }}</td>
      </ng-container>

      <ng-container matColumnDef="archivo">
        <th mat-header-cell *matHeaderCellDef>Archivo</th>
        <td mat-cell *matCellDef="let element">
          <a
            mat-mini-fab
            color="primary"
            [title]="'Ver tema'"
            [href]="element.archive | appLeccion"
            download
            target="_blank"
          >
            <mat-icon fontIcon="picture_as_pdf"></mat-icon>
          </a></td
      ></ng-container>

      <ng-container matColumnDef="quitar">
        <th mat-header-cell *matHeaderCellDef>Quitar</th>
        <td mat-cell *matCellDef="let element">
          <button
            mat-icon-button
            color="warn"
            (click)="onChangeStatus(element.id, element.status)"
            titulo="Inhabilitar"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="headersTable"></tr>
      <tr mat-row *matRowDef="let row; columns: headersTable"></tr>
    </table>
  </div>

  <!-- Responsive Cards for Small Screens -->
  <div class="block md:hidden">
    @for (tema of temas()?.data; track $index) {
    <mat-card class="mb-4">
      <mat-card-header>
        <mat-card-title>
          {{ tema.tema }}
        </mat-card-title>

        <mat-card-subtitle>
          <span class="flex space-x-2">
            <a
              mat-fab
              extended
              [href]="tema.archive | appLeccion"
              download
              target="_blank"
            >
              Ver Tema
              <mat-icon fontIcon="picture_as_pdf"></mat-icon>
            </a>
          </span>
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content class="mt-2">
        <p><strong>Descripcion</strong> {{ tema.description }}</p>
        <p><strong>Fecha:</strong> {{ tema.date }}</p>
      </mat-card-content>

      <mat-divider></mat-divider>

      <mat-card-actions>
        <button mat-button mat-raised color="primary" title="editar Lider">
          <mat-icon>edit</mat-icon> Editar
        </button>
        <span class="spacer"></span>
        <button mat-button mat-raised color="warn" title="dar baja Lider">
          <mat-icon>delete</mat-icon> Eliminar
        </button>
      </mat-card-actions>
    </mat-card>

    }
  </div>
  <app-pagination
    [currentPage]="temas()!.current_page"
    [lastPage]="temas()!.last_page"
    [links]="temas()!.links"
    [prevPageUrl]="temas()!.prev_page_url"
    [nextPageUrl]="temas()!.next_page_url"
    (pageChange)="onPageChange($event)"
  >
  </app-pagination>
</div>
